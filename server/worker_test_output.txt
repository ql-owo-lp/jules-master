=== RUN   TestAutoApprovalWorker_RunCheck
    setup_test.go:121: Created table index 0
    setup_test.go:121: Created table index 1
    setup_test.go:121: Created table index 2
    setup_test.go:121: Created table index 3
    setup_test.go:121: Created table index 4
[2026-01-14T20:31:59-08:00] info: AutoApprovalWorker: Found pending sessions: 1
[2026-01-14T20:31:59-08:00] info: AutoApprovalWorker: Approving session 44f3fd73-b0b8-46a2-936f-2e9150142f8b
    auto_approval_test.go:56: get session failed: sql: Scan error on column index 3, name "prompt": converting NULL to string is unsupported
--- FAIL: TestAutoApprovalWorker_RunCheck (0.00s)
=== RUN   TestAutoApprovalWorker_RunCheck_Disabled
    setup_test.go:121: Created table index 0
    setup_test.go:121: Created table index 1
    setup_test.go:121: Created table index 2
    setup_test.go:121: Created table index 3
    setup_test.go:121: Created table index 4
    auto_approval_test.go:102: get session failed: sql: Scan error on column index 3, name "prompt": converting NULL to string is unsupported
--- FAIL: TestAutoApprovalWorker_RunCheck_Disabled (0.00s)
=== RUN   TestAutoApprovalWorker_GetInterval
    setup_test.go:121: Created table index 0
    setup_test.go:121: Created table index 1
    setup_test.go:121: Created table index 2
    setup_test.go:121: Created table index 3
    setup_test.go:121: Created table index 4
--- PASS: TestAutoApprovalWorker_GetInterval (0.00s)
=== RUN   TestAutoContinueWorker_GetInterval
    setup_test.go:121: Created table index 0
    setup_test.go:121: Created table index 1
    setup_test.go:121: Created table index 2
    setup_test.go:121: Created table index 3
    setup_test.go:121: Created table index 4
--- PASS: TestAutoContinueWorker_GetInterval (0.00s)
=== RUN   TestAutoRetryWorker_GetInterval
    setup_test.go:121: Created table index 0
    setup_test.go:121: Created table index 1
    setup_test.go:121: Created table index 2
    setup_test.go:121: Created table index 3
    setup_test.go:121: Created table index 4
--- PASS: TestAutoRetryWorker_GetInterval (0.00s)
=== RUN   TestBackgroundJobWorker_ProcessJob
    setup_test.go:121: Created table index 0
    setup_test.go:121: Created table index 1
    setup_test.go:121: Created table index 2
    setup_test.go:121: Created table index 3
    setup_test.go:121: Created table index 4
    background_job_test.go:58: Calling workerCtx.ProcessJobs
    background_job_test.go:65: 
        	Error Trace:	/home/kevin/jules-master/server/internal/worker/background_job_test.go:65
        	Error:      	Received unexpected error:
        	            	failed to get job: sql: Scan error on column index 12, name "require_plan_approval": sql/driver: couldn't convert <nil> (<nil>) into type bool
        	Test:       	TestBackgroundJobWorker_ProcessJob
--- FAIL: TestBackgroundJobWorker_ProcessJob (0.00s)
panic: runtime error: invalid memory address or nil pointer dereference [recovered]
	panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x28 pc=0x9cf931]

goroutine 18 [running]:
testing.tRunner.func1.2({0xbcee40, 0x128d3e0})
	/usr/lib/go-1.24/src/testing/testing.go:1734 +0x21c
testing.tRunner.func1()
	/usr/lib/go-1.24/src/testing/testing.go:1737 +0x35e
panic({0xbcee40?, 0x128d3e0?})
	/usr/lib/go-1.24/src/runtime/panic.go:792 +0x132
github.com/mcpany/jules/internal/worker.TestBackgroundJobWorker_ProcessJob(0xc000127a40)
	/home/kevin/jules-master/server/internal/worker/background_job_test.go:73 +0x3b1
testing.tRunner(0xc000127a40, 0xd075e8)
	/usr/lib/go-1.24/src/testing/testing.go:1792 +0xf4
created by testing.(*T).Run in goroutine 1
	/usr/lib/go-1.24/src/testing/testing.go:1851 +0x413
FAIL	github.com/mcpany/jules/internal/worker	0.018s
FAIL
